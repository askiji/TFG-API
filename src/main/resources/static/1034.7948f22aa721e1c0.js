"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1034],{1034:(T,p,r)=>{r.r(p),r.d(p,{AdminComponent:()=>h});var _=r(2340),t=r(6114),m=r(6895),s=r(433),n=r(8256),u=r(1407),d=r(529);function g(i,l){if(1&i){const o=n.EpF();n.TgZ(0,"ion-item"),n._UZ(1,"ion-label",4),n.TgZ(2,"ion-button",5),n.NdJ("click",function(){const c=n.CHM(o).$implicit,C=n.oxw();return n.KtG(C.setOpen(!0,c.nombre))}),n._uU(3,"Cambiar contrase\xf1a"),n.qZA()()}if(2&i){const o=l.$implicit;n.xp6(1),n.Q6J("innerHTML",o.nombre,n.oJD)}}function f(i,l){if(1&i){const o=n.EpF();n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n._uU(3,"Cambio de contrase\xf1a de "),n._UZ(4,"span",4),n.qZA(),n.TgZ(5,"ion-buttons",6)(6,"ion-button",0),n.NdJ("click",function(){n.CHM(o);const a=n.oxw();return n.KtG(a.setOpen(!1))}),n._uU(7,"Cerrar"),n.qZA()()()(),n.TgZ(8,"ion-content",7)(9,"form",8),n.NdJ("ngSubmit",function(){n.CHM(o);const a=n.oxw();return n.KtG(a.onSubmit())}),n.TgZ(10,"ion-item")(11,"ion-label"),n._uU(12,"Nueva contrase\xf1a"),n.qZA(),n._UZ(13,"ion-input",9),n.qZA(),n.TgZ(14,"ion-button",10),n._uU(15,"Enviar"),n.qZA()()()}if(2&i){const o=n.oxw();n.xp6(4),n.Q6J("innerHTML",o.profesorSeleccionado,n.oJD),n.xp6(5),n.Q6J("formGroup",o.passwordForm),n.xp6(5),n.Q6J("disabled",!o.passwordForm.valid)}}let h=(()=>{class i{constructor(o,e,a){this.router=o,this._http=e,this._router=a,this.results=[],this.isModalOpen=!1,this.passwordForm=new s.cw({password:new s.NI(null,s.kI.required)})}ngOnInit(){this.peticion()}peticion(){this._http.get(`${_.N.apiUrl}/admin`).subscribe(o=>{console.log(o),this.results=o})}onIonInfinite(o){setTimeout(()=>{o.target.complete()},500)}setOpen(o,e){this.isModalOpen=o,this.profesorSeleccionado=e}onSubmit(){const o=`${_.N.apiUrl}/api/auth/cambio`;console.log(this.passwordForm.value,this.profesorSeleccionado),this._http.post(o,{password:this.passwordForm.value.password,profesor:this.profesorSeleccionado}).subscribe(()=>{this.isModalOpen=!1})}cerrarSesion(){this._http.post(`${_.N.apiUrl}/api/auth/signout`,this.profesorSeleccionado).subscribe(e=>{console.log("La sesi\xf3n ha sido cerrada con \xe9xito"),this._router.navigateByUrl("/login")},e=>{console.error("Hubo un error al intentar cerrar la sesi\xf3n",e)})}}return i.\u0275fac=function(o){return new(o||i)(n.Y36(u.F0),n.Y36(d.eN),n.Y36(u.F0))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-admin"]],standalone:!0,features:[n.jDz],decls:11,vars:2,consts:[[3,"click"],[4,"ngFor","ngForOf"],[3,"ionInfinite"],[3,"isOpen"],[3,"innerHTML"],["expand","block",3,"click"],["slot","end"],[1,"ion-padding"],[3,"formGroup","ngSubmit"],["type","password","formControlName","password"],["expand","full","type","submit",3,"disabled"]],template:function(o,e){1&o&&(n.TgZ(0,"h1"),n._uU(1,"ADMIN"),n.qZA(),n.TgZ(2,"ion-button",0),n.NdJ("click",function(){return e.cerrarSesion()}),n._uU(3,"Cerrar sesion"),n.qZA(),n.TgZ(4,"ion-content")(5,"ion-list"),n.YNc(6,g,4,1,"ion-item",1),n.TgZ(7,"ion-infinite-scroll",2),n.NdJ("ionInfinite",function(c){return e.onIonInfinite(c)}),n._UZ(8,"ion-infinite-scroll-content"),n.qZA()(),n.TgZ(9,"ion-modal",3),n.YNc(10,f,16,3,"ng-template"),n.qZA()()),2&o&&(n.xp6(6),n.Q6J("ngForOf",e.results),n.xp6(3),n.Q6J("isOpen",e.isModalOpen))},dependencies:[t.Pc,t.YG,t.Sm,t.W2,t.Gu,t.ju,t.MB,t.pK,t.Ie,t.Q$,t.q_,t.wd,t.sr,t.ki,t.j9,m.ez,m.sg,s.UX,s._Y,s.JJ,s.JL,s.sg,s.u]}),i})()}}]);